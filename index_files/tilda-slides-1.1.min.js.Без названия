function t_slidesInit(recid){var el=$('#rec'+recid),windowWidth=$(window).width(),sliderItem=el.find('.t-slides__item'),sliderWrapper=el.find('.t-slides__items-wrapper'),sliderArrows=el.find('.t-slides__arrow_wrapper'),sliderWidth=el.find('.t-slides__container').width(),firstSlide=sliderItem.filter(':first'),lastSlide=sliderItem.filter(':last'),totalSlides=sliderItem.length,sliderDoResize,pos=1;$(window).resize(function(){if(sliderDoResize)clearTimeout(sliderDoResize);sliderDoResize=setTimeout(function(){windowWidth=$(window).width();sliderWidth=el.find('.t-slides__container').width();t_slides_setSliderWidth(recid,sliderWidth,totalSlides);slideMove()},200)});firstSlide.before(lastSlide.clone(true).attr('data-slide-index','0'));lastSlide.after(firstSlide.clone(true).attr('data-slide-index',totalSlides+1).removeClass('t-slides__item_active'));t_slides_setSliderHeight(recid);t_slides_setSliderWidth(recid,sliderWidth,totalSlides);if(980>windowWidth){sliderWrapper.css({transform:'translate3d(-'+(sliderWidth*pos)+'px, 0, 0)'})}else{sliderWrapper.css('transform','')}el.find('.t-slides__arrow_wrapper-right').click(function(){if(!$(this).is('.t-slides__arrow-clicked')){$(this).addClass('t-slides__arrow-clicked');slideRight()}});el.find('.t-slides__arrow_wrapper-left').click(function(){if(!$(this).is('.t-slides__arrow-clicked')){$(this).addClass('t-slides__arrow-clicked');slideLeft()}});el.find('.t-slides__bullet').click(function(){pos=$(this).attr('data-slide-bullet-for');slideMove()});function slideLeft(){pos--;slideMove()}function slideRight(){pos++;slideMove()}function slideMove(){sliderWrapper.addClass('t-slides_animated');if(980>windowWidth){sliderWrapper.css({transform:'translate3d(-'+(sliderWidth*pos)+'px, 0, 0)'})}else{sliderWrapper.css('transform','')}if(pos==(totalSlides+1)){pos=1}if(pos==0){pos=totalSlides}setTimeout(function(){sliderWrapper.removeClass('t-slides_animated');if(980>windowWidth){sliderWrapper.css({transform:'translate3d(-'+(sliderWidth*pos)+'px, 0, 0)'})}else{sliderWrapper.css('transform','')}$('.t-slides__arrow_wrapper').removeClass('t-slides__arrow-clicked')},300);t_slides_setActiveBullet(recid,pos);t_slides_setActiveSlide(recid,pos);t_slides_setSliderHeight(recid)}delete Hammer.defaults.cssProps.userSelect;hammer=new Hammer(el.find('.t-slides__items-wrapper')[0],{domEvents:true,threshold:0,direction:Hammer.DIRECTION_VERTICAL});hammer.on('pan',function(event){if(980>windowWidth){var distance=event.deltaX,percentage=100/totalSlides*event.deltaX/$(window).innerWidth(),sensitivity=20;t_slides_scrollImages(recid,(sliderWidth*pos)-distance);if(event.isFinal){if(event.velocityX>1){slideLeft()}else if(event.velocityX<-1){slideRight()}else{if(percentage<=-(sensitivity/totalSlides)){slideRight()}else if(percentage>=(sensitivity/totalSlides)){slideLeft()}else{slideMove()}}}}})}function t_slides_scrollImages(recid,distance){var el=$('#rec'+recid),value=(distance<0?"":"-")+Math.abs(distance).toString();el.find(".t-slides__items-wrapper").css("transform","translate3d("+value+"px, 0, 0)")}function t_slides_setActiveBullet(recid,pos){var el=$('#rec'+recid),bullet=el.find('.t-slides__bullet'),bulletActive=el.find('.t-slides__bullet[data-slide-bullet-for="'+pos+'"]');bullet.removeClass('t-slides__bullet_active');bulletActive.addClass('t-slides__bullet_active')}function t_slides_setActiveSlide(recid,pos){var el=$('#rec'+recid),slide=el.find('.t-slides__item'),slideActive=el.find('.t-slides__item[data-slide-index="'+pos+'"]');slide.removeClass('t-slides__item_active');slideActive.addClass('t-slides__item_active')}function t_slides_setSliderWidth(recid,sliderWidth,totalSlides){var el=$('#rec'+recid);el.find('.t-slides__items-wrapper').width(sliderWidth*(totalSlides+2));el.find('.t-slides__item').width(sliderWidth)}function t_slides_setSliderHeight(recid){var el=$('#rec'+recid);el.find('.t-slides__items-wrapper').height(el.find('.t-slides__item_active').height());el.find('.t-slides__arrow_wrapper').height(el.find('.t-slides__item_active').height())}
